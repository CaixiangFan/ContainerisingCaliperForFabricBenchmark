version: "2"

networks:
  test:

services:
  caliper:
    container_name: caliper
    image: hyperledger/caliper:0.3.1
    command: launch master --caliper-fabric-gateway-usegateway --caliper-flow-only-test --caliper-fabric-gateway-discovery
    environment:
      - CALIPER_BIND_SUT=fabric:2.1.0
      - CALIPER_BENCHCONFIG=benchmarks/scenario/simple/pavan-v2.1/config.yaml
      - CALIPER_NETWORKCONFIG=networks/fabric/pavan-v2.1/network-config.yaml
      # - CALIPER_FABRIC_SKIPCREATECHANNEL_MYCHANNEL=true
    volumes:
      - ./caliper-benchmarks:/hyperledger/caliper/workspace
    network_mode: host
